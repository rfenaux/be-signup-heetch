!function(t){var e={},n={};t.fn.webfontselector=function(){var t=Array.prototype.slice.call(arguments);if("string"==typeof t[0]){var n=t[0];e.hasOwnProperty(n)&&"function"==typeof e[n]&&(t.length>1?e[n].apply(this,t.slice(1)):e[n].apply(this))}else"object"==typeof t[0]?e.init.apply(this,t):console.log("No default options yet! Please call webfontselector with a method name or an options object.")},e.init=function(e){return this.each(function(){var a=this,o=t(a),i=o.parent();o.append('<option value="" data-webfont="false"></option>'),o.append('<option value="inherit" data-webfont="false">Inherit</option>'),i.append('<div class="field-wrapper"><label>Variant</label><select class="font-variant"></select></div>');var l=i.find("select.font-variant");l.parent().hide(),i.append('<div class="field-wrapper"><label>Subset</label><select class="font-subset"></select></div>');var s=i.find("select.font-subset");s.parent().hide();var r=!1;for(var p in e.modules){var c=t('<optgroup label="'+p+'"></optgroup>');o.append(c);var d=e.modules[p];for(var f in d.fonts){var h=d.fonts[f],u=t("<option>"+f+"</option>");u.val(f),u.data("variants",h.variants.join(",")),u.data("subsets",h.subsets.join(",")),u.data("category",h.category),u.data("webfont","web_safe"!==p),u.attr("style","font-family: '"+f+"', "+h.category+", __"+p),c.append(u)}}o.change(function(){var e=t(this).find("option:selected");if(l.empty().val(""),s.empty().val(""),void 0!==e.data("variants")){var n=e.data("variants").split(",");l.append(t("<option></option>")).val(""),t.each(n,function(e,n){l.append(t("<option></option>").html(n))}),n.indexOf("regular")>-1?l.val("regular"):n.indexOf("400")>-1?l.val("400"):l.val(n[0]),l.find("option").length>2?l.parent().show():l.parent().hide()}else l.parent().hide();void 0!==e.data("subsets")?(s.append(t("<option></option>")),t.each(e.data("subsets").split(","),function(e,n){s.append(t("<option></option>").html(n))}),s.val("latin"),s.find("option").length>2?s.parent().show():s.parent().hide()):s.parent().hide()});var v=function(e,n){if(r){var a={};a.font=o.val();var i=o.find("option:selected");a.webfont=i.data("webfont"),a.category=i.data("category"),a.variant=l.val(),a.subset=s.val(),a.module=i.parent().attr("label");var p=t(this).data("currentValue");n&&n.silent||t(this).trigger("font_change",[a,p]),t(this).data("currentValue",a)}}.bind(this);i.find("select").change(v);var g=null;if(null===g){var y=null;o.on("chosen:ready",function(e,a){var o=a.chosen.dropdown,i=o.find(".chosen-results");o.find(".chosen-results").on("scroll",function(){clearTimeout(y),y=setTimeout(function(){var e,a,o,l={};i.find("li").each(function(){var s=t(this),r=s.position().top;void 0!==s.attr("style")&&""!==s.attr("style")&&-1===s.attr("style").indexOf("__web_safe")&&r>-10&&r<i.outerHeight()+30&&(o=s.attr("style").match(/font-family: ([^,]+),.*__([^,]+);/),a=o[1].replace(/['"]/g,"").trim(),e=o[2],void 0===l[e]&&(l[e]=[]),void 0===n[a]&&(l[e].push(a),n[a]=!0))}),l.hasOwnProperty("google")&&l.google.length>0&&WebFont.load({google:{families:l.google}})},500)}),setTimeout(function(){i.trigger("scroll")},500),a.chosen.search_field.on("keyup",function(){setTimeout(function(){i.trigger("scroll")},500)})}).on("chosen:showing_dropdown",function(t,e){e.chosen.dropdown.find(".chosen-results").trigger("scroll")}).chosen({allow_single_deselect:!0,search_contains:!0,width:"100%"}),g=!0}r=!0})},e.update=function(t){var e=t;if(e&&"inherit"!==e){var n=e.match(/\'([^\']+)\'/);null!=n&&(e=n.length>1?n[1]:n[0])}this.val(e),this.trigger("chosen:updated"),this.trigger("change",{silent:!0})}}(jQuery);